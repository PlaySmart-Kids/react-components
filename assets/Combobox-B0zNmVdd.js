import{j as r}from"./jsx-runtime-CkxqCPlQ.js";import{R as Ne,r as _}from"./index-DJO9vBfz.js";import{j as Te,f as we,e as Oe,g as F,b,i as qe,G as Se,M as Ee,a as A,h as Y,y as ze}from"./DefaultThemeProvider-Ce-zb_Sa.js";import{C as o,a as Ae}from"./InputUtil-BONj-j-a.js";const Be="_Root_jzb13_1",Fe="_Section_jzb13_6",He="_InlineContainer_jzb13_20",ke="_Input_jzb13_28",Me="_ExpandIcon_jzb13_44",$e="_ExpandIconRotate_jzb13_50",We="_ListPanel_jzb13_54",Ke="_ListPanelPopup_jzb13_73",Ue="_ListItem_jzb13_79",Ge="_ListDisabledSelected_jzb13_91",Je="_ListItemDisabled_jzb13_95",Qe="_DefaultListItemRenderer_jzb13_99",Xe="_DefaultListItemRenderOnInput_jzb13_111",Ye="_InputLabel_jzb13_128",l={Root:Be,Section:Fe,InlineContainer:He,Input:ke,ExpandIcon:Me,ExpandIconRotate:$e,ListPanel:We,ListPanelPopup:Ke,ListItem:Ue,ListDisabledSelected:Ge,ListItemDisabled:Je,DefaultListItemRenderer:Qe,DefaultListItemRenderOnInput:Xe,InputLabel:Ye};function H(a,s){s.scrollTo({top:a-30,behavior:"smooth"})}function Ze(a,s){s=s==="wrap"?"wrap":ze(s),s==="wrap"?a.push(o.WrapPadding):s===Y.SMALL?a.push(o.SmallPadding):s===Y.LARGE?a.push(o.LargePadding):a.push(o.RegularPadding)}function et(a,s,O,p,m,x,P,q,y,j,h,I,C,u,L){a?(s.push(o.DisableBorder),s.push(o.DisableOutline),p.push(b.DisableTextColor),(m!=null&&m.toString().trim().length>0||!y)&&(p.push(o.LabelSmaller),p.push(o.LabelMoveUpForComboBox)),O.push(b.DisableTextColor),h.push(b.DisableTextColor)):P||j!==""||q?(P&&(h.push(l.ExpandIconRotate),h.push(b.TextPrimary)),p.push(o.LabelMoveUpForComboBox),p.push(o.LabelSmaller),p.push(I),L&&(s.push(o.FocusBorder),s.push(C),s.push(u)),O.push(I)):((m!=null&&m.toString().trim().length>0||!y)&&(p.push(o.LabelSmaller),p.push(o.LabelMoveUpForComboBox)),x?(h.push(b.TextPrimary),p.push(o.LabelActiveColor)):(h.push(b.TextSecondary),p.push(o.LabelNormalColor)),L&&(x?s.push(o.HoverBorder):s.push(o.NormalBorder)))}function tt(a,s){const[O,p]=_.useState(!0),[m,x]=_.useState(!1),[P,q]=_.useState(!1),[y,j]=_.useState(a.defaultValue),[h,I]=_.useState(""),C=_.useRef(null),u=_.useRef(null),{autoComplete:L,rootItemStyle:g,className:k,style:ee,hint:N,rootItemRenderer:te,listItemRenderer:ne,listItemStyle:ae,onChange:S,options:c,startAdornment:M,disabled:v,fullWidth:oe}=a,le=a.size==="wrap"?"":a.label,se=a.alwaysHighlight?a.alwaysHighlight:!1,re=a.shrinkTitle!==void 0?a.shrinkTitle:!0,T=a.size==="wrap"?a.size:Te(a.size),R=we(a.hue),V=Oe(a.color),E=[l.Root],$=[l.Section],W=[l.Section,"body2"],K=[l.InlineContainer],U=[l.Input],G=[o.LabelForComboBox],ie=F("Border",V,R),ue=F("Color",V,R),ce=F("Outline",V,R),J=[l.ExpandIcon],de=(e,n,t,i,d,f)=>i?i(e,n,d||!1,f||!1):r.jsx("span",{className:A(l.DefaultListItemRenderer,t==null?void 0:t.className),style:t==null?void 0:t.style,children:e});function pe(e){const n=document.documentElement.clientHeight;e.getBoundingClientRect().top>n/2?p(!1):p(!0)}function fe(){return e=>{e.currentTarget.setSelectionRange(0,e.currentTarget.value.length),e.stopPropagation()}}function me(){return e=>{if(e.code)if(e.code==="Enter"){if(L){const n=L(h,c);j(n[0].value),u.current&&u.current.blur()}}else e.code==="Tab"&&u.current&&u.current.blur();e.stopPropagation()}}function he(){return e=>{I(e.currentTarget.value),e.stopPropagation()}}const ge=(e,n,t,i)=>{const d=e.find(f=>f.value===n);if(d){if(t)return t(d.label,d.value,i||!1);{const f=l.DefaultListItemRenderOnInput+" "+(i?b.DisableTextColor:P?o.LabelActiveColor:o.LabelNormalColor)+" "+(g&&g.className?" "+g.className:""),z=g==null?void 0:g.style;if(L){const B=m?{paddingInline:"0px"}:{opacity:"0",paddingInline:"0px"};return r.jsxs(r.Fragment,{children:[r.jsx("input",{tabIndex:-1,ref:u,className:f,value:h,onChange:he(),onKeyDown:me(),onBlur:Pe=>{m&&setTimeout(()=>{x(!1),u.current&&u.current.blur()},300),Pe.stopPropagation()},onFocus:fe(),style:{...B,...z}}),!m&&r.jsx("span",{className:[f,l.InputLabel].join(" "),children:d.label})]})}else return r.jsx("span",{className:f,style:z,children:d.label})}}else return t?t(null,null,i||!1):r.jsx("span",{className:A(l.DefaultListItemRenderOnInput,g==null?void 0:g.className),style:g==null?void 0:g.style,children:" "})},be=e=>{const n=e.currentTarget.getAttribute("data-index");if(n){const t=parseInt(n);D[t].value!==w&&(S&&S(D[t].value,t,c),j(D[t].value),I(D[t].value))}x(!1)},Q=e=>{let n=e.querySelector("[data-cursor]");return n===null&&(n=e.querySelector("[data-selected]")),n},X=(e,n)=>{const t=Q(e);if(t!==null){const i=t.getAttribute("data-index");if(i!==null){const d=parseInt(i),f=e.querySelector('[data-index="'+(d+n)+'"]');if(f&&(f.setAttribute("data-cursor","true"),t.removeAttribute("data-cursor"),t.classList.toggle(l.ListCursor),d>=0&&d<c.length&&f.classList.toggle(l.ListCursor),C.current)){const z=C.current,B=f.offsetTop;H(B,z)}}}},Le=e=>{if(e.code)if(e.code==="Escape")x(!1),e.preventDefault(),e.stopPropagation();else if(e.code==="ArrowDown")X(e.currentTarget,1),e.preventDefault(),e.stopPropagation();else if(e.code==="ArrowUp")X(e.currentTarget,-1),e.preventDefault(),e.stopPropagation();else if(e.code==="Enter"){const n=Q(e.currentTarget);if(n!=null){const t=n.getAttribute("data-index");if(t!=null){const i=parseInt(t);j(c[i].value),I(c[i].value),x(!1)}}e.preventDefault(),e.stopPropagation()}else{const n=c.findIndex(t=>t.value.toLowerCase().indexOf(e.key)===0);if(n>=0&&(c[n].value!==w&&(S&&S(c[n].value,n,c),j(c[n].value),I(c[n].value)),C.current)){const t=C.current,d=t.querySelector('[data-index="'+n+'"]').offsetTop;H(d,t)}}},xe=()=>{q(!0)},Ie=()=>{q(!1)},Ce=e=>{x(!1)},_e=e=>{e.stopPropagation()},ve=e=>{u.current&&u.current.focus()},ye=e=>{if(m||(pe(e.currentTarget),x(!0)),e.stopPropagation(),u.current!==null)u.current.setSelectionRange(0,u.current.value.length),setTimeout(()=>{u.current&&u.current.focus()},200);else if(C.current){const n=C.current,t=n.querySelector("[data-selected]");if(t){const i=t.offsetTop;H(i,n)}}},w=a.value!==void 0?a.value:y;et(v,$,W,G,w,P,m,se,re,N||"",J,ue,ie,ce,T!=="wrap"),Ze(K,T),oe?E.push(b.FullWidth):E.push(b.FitContentWidth),k&&E.push(k),T==="wrap"&&U.push(l.WrapPadding);const D=_.useMemo(()=>L&&h!=null&&h.trim().length>0?L(h,c):c,[L,h,c]);_.useEffect(()=>{a.value!==void 0?I(a.value):I(y)},[y,a.value]);const je=v?void 0:b[`Background-hover-alpha-${V}-${qe(R)}`],Re=void 0,Ve=v?void 0:b[`Background-${V}-${R}`],De=v?l.ListDisabledSelected:b[`Color-${V}-${Se(R)}`];return r.jsxs("div",{ref:s,className:E.join(" "),style:ee,"data-hint":N!==""?N:void 0,children:[r.jsxs("div",{className:$.join(" "),tabIndex:0,onClick:ye,...L?{onKeyDown:Le}:{onBlur:Ce},onMouseEnter:xe,onMouseLeave:Ie,onFocus:ve,onMouseDown:_e,children:[m&&!L&&r.jsx("div",{className:o.HiddenInput,onClick:e=>{e.stopPropagation(),e.preventDefault(),x(!1)}}),r.jsx("label",{className:G.join(" "),children:le}),T!=="wrap"&&M?r.jsx("span",{className:o.StartAdornmentContainer,children:M}):T!=="wrap"&&r.jsx("span",{className:o.NormalSpacing,children:" "}),r.jsxs("span",{className:K.join(" "),children:[r.jsx(Ee,{name:"expand_more",className:J.join(" ")}),r.jsx("div",{className:U.join(" "),children:ge(c,w,te,v)})]}),r.jsx("div",{ref:C,style:{visibility:m?"visible":"hidden"},className:A(l.ListPanel,O?void 0:l.ListPanelPopup),children:D&&D.map((e,n)=>{const t=e.value===w;return r.jsx("span",{className:A(l.ListItem,v?l.ListItemDisabled:void 0,t?Ve:je,t?De:Re),"data-selected":t?!0:void 0,"data-cursor":t?!0:void 0,"data-index":`${n}`,onClick:v?void 0:be,children:de(e.label,e.value,ae,ne,t,v)},`list_item_${n}`)})})]}),Ae(W,N)]})}const Z=Ne.forwardRef(tt);try{Z.displayName="Combobox",Z.__docgenInfo={description:"",displayName:"Combobox",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},autoComplete:{defaultValue:null,description:"",name:"autoComplete",required:!1,type:{name:"((label: string, options: Option<L, V>[]) => Option<L, V>[])"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: V, index: number, options: Option<L, V>[]) => void)"}},fullWidth:{defaultValue:null,description:"",name:"fullWidth",required:!1,type:{name:"boolean"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"Option<L, V>[]"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"V"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"V"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"string"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string"}},hue:{defaultValue:null,description:"",name:"hue",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},startAdornment:{defaultValue:null,description:"",name:"startAdornment",required:!1,type:{name:"ReactNode"}},hint:{defaultValue:null,description:"",name:"hint",required:!1,type:{name:"DefaultRenderer"}},alwaysHighlight:{defaultValue:null,description:"",name:"alwaysHighlight",required:!1,type:{name:"boolean"}},shrinkTitle:{defaultValue:null,description:"",name:"shrinkTitle",required:!1,type:{name:"boolean"}},rootItemRenderer:{defaultValue:null,description:"",name:"rootItemRenderer",required:!1,type:{name:"((label: L | null, value: V | null, disabled: boolean) => ReactNode)"}},rootItemStyle:{defaultValue:null,description:"",name:"rootItemStyle",required:!1,type:{name:"ItemStyle"}},listItemRenderer:{defaultValue:null,description:"",name:"listItemRenderer",required:!1,type:{name:"((label: L, value: V, selected: boolean, disable: boolean) => ReactNode)"}},listItemStyle:{defaultValue:null,description:"",name:"listItemStyle",required:!1,type:{name:"ItemStyle"}}}}}catch{}export{Z as C};
