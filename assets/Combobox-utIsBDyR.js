import{j as l}from"./jsx-runtime-CkxqCPlQ.js";import{R as we,r as _}from"./index-DJO9vBfz.js";import{o as Oe,g as je,f as qe,G as Se,h as Y,i as Ee,d as h,N as Ae,k as Be,q as He,M as Fe,c as B,j as Z,a5 as ke}from"./DefaultThemeProvider-DB5yquFP.js";import{C as o,a as Me}from"./InputUtil-CfDwzwTJ.js";const Ge="_Root_1dste_1",We="_Section_1dste_6",ze="_InlineContainer_1dste_20",Ke="_Input_1dste_28",Ue="_ExpandIcon_1dste_44",$e="_ExpandIconRotate_1dste_50",Je="_ListPanel_1dste_54",Qe="_ListPanelPopup_1dste_74",Xe="_ListItem_1dste_80",Ye="_ListDisabledSelected_1dste_92",Ze="_ListItemDisabled_1dste_96",et="_DefaultListItemRenderer_1dste_100",tt="_DefaultListItemRenderOnInput_1dste_112",nt="_InputLabel_1dste_129",s={Root:Ge,Section:We,InlineContainer:ze,Input:Ke,ExpandIcon:Ue,ExpandIconRotate:$e,ListPanel:Je,ListPanelPopup:Qe,ListItem:Xe,ListDisabledSelected:Ye,ListItemDisabled:Ze,DefaultListItemRenderer:et,DefaultListItemRenderOnInput:tt,InputLabel:nt};function F(a,r){r.scrollTo({top:a-30,behavior:"smooth"})}function at(a,r){r=r==="wrap"?"wrap":ke(r),r==="wrap"?a.push(o.WrapPadding):r===Z.SMALL?a.push(o.SmallPadding):r===Z.LARGE?a.push(o.LargePadding):a.push(o.RegularPadding)}function ot(a,r,j,p,f,b,T,q,R,V,g,I,C,u,L){a?(r.push(o.DisableBorder),r.push(o.DisableOutline),p.push(h.DisableTextColor),(f!=null&&f.toString().trim().length>0||!R)&&(p.push(o.LabelSmaller),p.push(o.LabelMoveUpForComboBox)),j.push(h.DisableTextColor),g.push(h.DisableTextColor)):T||V!==""||q?(T&&(g.push(s.ExpandIconRotate),g.push(h.TextPrimary)),p.push(o.LabelMoveUpForComboBox),p.push(o.LabelSmaller),p.push(I),L&&(r.push(o.FocusBorder),r.push(C),r.push(u)),j.push(I)):((f!=null&&f.toString().trim().length>0||!R)&&(p.push(o.LabelSmaller),p.push(o.LabelMoveUpForComboBox)),b?(g.push(h.TextPrimary),p.push(o.LabelActiveColor)):(g.push(h.TextSecondary),p.push(o.LabelNormalColor)),L&&(b?r.push(o.HoverBorder):r.push(o.NormalBorder)))}function lt(a,r){const[j,p]=_.useState(!0),[f,b]=_.useState(!1),[T,q]=_.useState(!1),[R,V]=_.useState(a.defaultValue),[g,I]=_.useState(""),C=_.useRef(null),u=_.useRef(null),{autoComplete:L,rootItemStyle:x,className:k,style:te,hint:w,rootItemRenderer:ne,listItemRenderer:ae,listItemStyle:oe,onChange:S,options:c,startAdornment:M,disabled:v,fullWidth:le,name:G}=a,se=a.size==="wrap"?"":a.title,re=a.alwaysHighlight?a.alwaysHighlight:!1,ie=a.shrinkTitle!==void 0?a.shrinkTitle:!0,O=a.size==="wrap"?a.size:Oe(a.size),D=je(a.hue),N=qe(a.color),E=[s.Root],W=[s.Section],z=[s.Section,"body2"],K=[s.InlineContainer],U=[s.Input],$=[o.LabelForComboBox],ue=Se(N,D),ce=Y(N,D),de=Ee(N,D),J=[s.ExpandIcon],pe=(e,n,t,i,d,m)=>i?i(e,n,d||!1,m||!1):l.jsx("span",{className:B(s.DefaultListItemRenderer,t==null?void 0:t.className),style:t==null?void 0:t.style,children:e});function fe(e){const n=document.documentElement.clientHeight;e.getBoundingClientRect().top>n/2?p(!1):p(!0)}function me(){return e=>{e.currentTarget.setSelectionRange(0,e.currentTarget.value.length),e.stopPropagation()}}function he(){return e=>{if(e.code)if(e.code==="Enter"){if(L){const n=L(g,c);V(n[0].value),u.current&&u.current.blur()}}else e.code==="Tab"&&u.current&&u.current.blur();e.stopPropagation()}}function ge(){return e=>{I(e.currentTarget.value),e.stopPropagation()}}const xe=(e,n,t,i)=>{const d=e.find(m=>m.value===n);if(d){if(t)return t(d.label,d.value,i||!1);{const m=s.DefaultListItemRenderOnInput+" "+(i?h.DisableTextColor:T?o.LabelActiveColor:o.LabelNormalColor)+" "+(x&&x.className?" "+x.className:""),A=x==null?void 0:x.style;if(L){const H=f?{paddingInline:"0px"}:{opacity:"0",paddingInline:"0px"};return l.jsxs(l.Fragment,{children:[l.jsx("input",{tabIndex:-1,ref:u,className:m,value:g,onChange:ge(),onKeyDown:he(),onBlur:Te=>{f&&setTimeout(()=>{b(!1),u.current&&u.current.blur()},300),Te.stopPropagation()},onFocus:me(),style:{...H,...A}}),!f&&l.jsx("span",{className:[m,s.InputLabel].join(" "),children:d.label})]})}else return l.jsx("span",{className:m,style:A,children:d.label})}}else return t?t(null,null,i||!1):l.jsx("span",{className:B(s.DefaultListItemRenderOnInput,x==null?void 0:x.className),style:x==null?void 0:x.style,children:" "})},Le=e=>{const n=e.currentTarget.getAttribute("data-index");if(n){const t=parseInt(n);P[t].value!==y&&(S&&S(P[t].value,t,c),V(P[t].value),I(P[t].value))}b(!1)},Q=e=>{let n=e.querySelector("[data-cursor]");return n===null&&(n=e.querySelector("[data-selected]")),n},X=(e,n)=>{const t=Q(e);if(t!==null){const i=t.getAttribute("data-index");if(i!==null){const d=parseInt(i),m=e.querySelector('[data-index="'+(d+n)+'"]');if(m&&(m.setAttribute("data-cursor","true"),t.removeAttribute("data-cursor"),t.classList.toggle(s.ListCursor),d>=0&&d<c.length&&m.classList.toggle(s.ListCursor),C.current)){const A=C.current,H=m.offsetTop;F(H,A)}}}},be=e=>{if(e.code)if(e.code==="Escape")b(!1),e.preventDefault(),e.stopPropagation();else if(e.code==="ArrowDown")X(e.currentTarget,1),e.preventDefault(),e.stopPropagation();else if(e.code==="ArrowUp")X(e.currentTarget,-1),e.preventDefault(),e.stopPropagation();else if(e.code==="Enter"){const n=Q(e.currentTarget);if(n!=null){const t=n.getAttribute("data-index");if(t!=null){const i=parseInt(t);V(c[i].value),I(c[i].value),b(!1)}}e.preventDefault(),e.stopPropagation()}else{const n=c.findIndex(t=>t.value.toLowerCase().indexOf(e.key)===0);if(n>=0&&(c[n].value!==y&&(S&&S(c[n].value,n,c),V(c[n].value),I(c[n].value)),C.current)){const t=C.current,d=t.querySelector('[data-index="'+n+'"]').offsetTop;F(d,t)}}},Ie=()=>{q(!0)},Ce=()=>{q(!1)},_e=e=>{b(!1)},ve=e=>{e.stopPropagation()},ye=e=>{u.current&&u.current.focus()},Re=e=>{if(f||(fe(e.currentTarget),b(!0)),e.stopPropagation(),u.current!==null)u.current.setSelectionRange(0,u.current.value.length),setTimeout(()=>{u.current&&u.current.focus()},200);else if(C.current){const n=C.current,t=n.querySelector("[data-selected]");if(t){const i=t.offsetTop;F(i,n)}}},y=a.value!==void 0?a.value:R;ot(v,W,z,$,y,T,f,re,ie,w||"",J,ce,ue,de,O!=="wrap"),at(K,O),le?E.push(h.FullWidth):E.push(h.FitContentWidth),k&&E.push(k),O==="wrap"&&U.push(s.WrapPadding);const P=_.useMemo(()=>L&&g!=null&&g.trim().length>0?L(g,c):c,[L,g,c]);_.useEffect(()=>{a.value!==void 0?I(a.value):I(R)},[R,a.value]);const Ve=v?void 0:h[`Background-hover-alpha-${N}-${Ae(D)}`],De=void 0,Ne=v?void 0:Be(N,D),Pe=v?s.ListDisabledSelected:Y(N,He(D));return l.jsxs("div",{ref:r,className:E.join(" "),style:te,"data-hint":w!==""?w:void 0,children:[G&&l.jsx("input",{type:"hidden",name:G,value:typeof y=="string"?y:""}),l.jsxs("div",{className:W.join(" "),tabIndex:0,onClick:Re,...L?{onKeyDown:be}:{onBlur:_e},onMouseEnter:Ie,onMouseLeave:Ce,onFocus:ye,onMouseDown:ve,children:[f&&!L&&l.jsx("div",{className:o.HiddenInput,onClick:e=>{e.stopPropagation(),e.preventDefault(),b(!1)}}),l.jsx("label",{className:$.join(" "),children:se}),O!=="wrap"&&M?l.jsx("span",{className:o.StartAdornmentContainer,children:M}):O!=="wrap"&&l.jsx("span",{className:o.NormalSpacing,children:" "}),l.jsxs("span",{className:K.join(" "),children:[l.jsx(Fe,{name:"expand_more",className:J.join(" ")}),l.jsx("div",{className:U.join(" "),children:xe(c,y,ne,v)})]}),l.jsx("div",{ref:C,className:B(s.ListPanel,f?void 0:h.NoHeight,f?h.Visible:h.Hidden,j?void 0:s.ListPanelPopup),children:P&&P.map((e,n)=>{const t=e.value===y;return l.jsx("span",{className:B(s.ListItem,v?s.ListItemDisabled:void 0,t?Ne:Ve,t?Pe:De),"data-selected":t?!0:void 0,"data-cursor":t?!0:void 0,"data-index":`${n}`,onClick:v?void 0:Le,children:pe(e.label,e.value,oe,ae,t,v)},`list_item_${n}`)})})]}),Me(z,w)]})}const ee=we.forwardRef(lt);try{ee.displayName="Combobox",ee.__docgenInfo={description:"",displayName:"Combobox",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},autoComplete:{defaultValue:null,description:"",name:"autoComplete",required:!1,type:{name:"((label: string, options: Option<L, V>[]) => Option<L, V>[])"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: V, index: number, options: Option<L, V>[]) => void)"}},fullWidth:{defaultValue:null,description:"",name:"fullWidth",required:!1,type:{name:"boolean"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"Option<L, V>[]"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"V"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"V"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"string"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string"}},hue:{defaultValue:null,description:"",name:"hue",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},startAdornment:{defaultValue:null,description:"",name:"startAdornment",required:!1,type:{name:"ReactNode"}},hint:{defaultValue:null,description:"",name:"hint",required:!1,type:{name:"DefaultRenderer"}},alwaysHighlight:{defaultValue:null,description:"",name:"alwaysHighlight",required:!1,type:{name:"boolean"}},shrinkTitle:{defaultValue:null,description:"",name:"shrinkTitle",required:!1,type:{name:"boolean"}},rootItemRenderer:{defaultValue:null,description:"",name:"rootItemRenderer",required:!1,type:{name:"((label: L | null, value: V | null, disabled: boolean) => ReactNode)"}},rootItemStyle:{defaultValue:null,description:"",name:"rootItemStyle",required:!1,type:{name:"ItemStyle"}},listItemRenderer:{defaultValue:null,description:"",name:"listItemRenderer",required:!1,type:{name:"((label: L, value: V, selected: boolean, disable: boolean) => ReactNode)"}},listItemStyle:{defaultValue:null,description:"",name:"listItemStyle",required:!1,type:{name:"ItemStyle"}}}}}catch{}export{ee as C};
