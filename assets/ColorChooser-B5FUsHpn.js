import{j as h}from"./jsx-runtime-CkxqCPlQ.js";import{r as m}from"./index-DJO9vBfz.js";import{T as v}from"./DefaultThemeProvider-DB5yquFP.js";import{n as q}from"./index.browser-vcSNLBTf.js";import{N as X}from"./ColorUtil-B4gL3Pif.js";function L(e){if(e===null)return;e.startsWith("#")&&(e=e.substring(1));let n=0,a=0,t=0,o="";if(e.length===3)return n="0x"+e[0]+e[0],a="0x"+e[1]+e[1],t="0x"+e[2]+e[2],{red:+n,green:+a,blue:+t,alpha:1};if(e.length===6)return n="0x"+e[0]+e[1],a="0x"+e[2]+e[3],t="0x"+e[4]+e[5],{red:+n,green:+a,blue:+t,alpha:1};if(e.length===4)return n="0x"+e[0]+e[0],a="0x"+e[1]+e[1],t="0x"+e[2]+e[2],o="0x"+e[3]+e[3],o=+(o/255).toFixed(3),{red:+n,green:+a,blue:+t,alpha:o};if(e.length===8)return n="0x"+e[0]+e[1],a="0x"+e[2]+e[3],t="0x"+e[4]+e[5],o="0x"+e[6]+e[7],o=+(o/255).toFixed(3),{red:+n,green:+a,blue:+t,alpha:o}}function x(e){let n=Math.round(e.red).toString(16),a=Math.round(e.green).toString(16),t=Math.round(e.blue).toString(16);if(e.alpha===1)return n.length===1&&(n="0"+n),a.length===1&&(a="0"+a),t.length===1&&(t="0"+t),n+a+t;{let o=Math.round(e.alpha*255).toString(16);return n.length===1&&(n="0"+n),a.length===1&&(a="0"+a),t.length===1&&(t="0"+t),o.length===1&&(o="0"+o),n+a+t+o}}const S="_Root_i475m_1",T="_Options_i475m_9",Y="_Input_i475m_15",y={Root:S,Options:T,Input:Y},F="_Root_evjr2_1",O="_Indicator_evjr2_11",P={Root:F,Indicator:O};function D(e,n){let a=0;const t={...e};return n>83?(a=255*(n-83)/17,t.red=255,t.green=0,t.blue=255-Math.round(a)):n>67?(a=255*(n-67)/16,t.red=Math.round(a),t.green=0,t.blue=255):n>50?(a=255*(n-50)/17,t.red=0,t.green=255-Math.round(a),t.blue=255):n>33?(a=255*(n-33)/17,t.red=0,t.green=255,t.blue=Math.round(a)):n>17?(a=255*(n-17)/16,t.red=255-Math.round(a),t.green=255,t.blue=0):(a=255*n/17,t.red=255,t.green=Math.round(a),t.blue=0),t}function K(e,n){return n.red===255?n.blue!==0?e*(1-.17*(n.blue/255)):n.green!==0?e*.17*(n.green/255):0:n.blue===255?n.red!==0?e*(.67+.17*(n.red/255)):n.green!==0?e*(.67-.17*(n.green/255)):e*.67:n.green===255?n.red!==0?e*(.33-.16*(n.red/255)):n.blue!==0?e*(.33+.17*(n.blue/255)):e*.33:0}function B(e){const[n,a]=m.useState({position:0,color:e.color,onChange:e.onChange}),t=m.useRef();return m.useEffect(()=>{t.current&&a(o=>({position:K(165,e.color),color:e.color,onChange:o.onChange}))},[t,e.color]),m.useEffect(()=>{function o(d){t.current&&t.current.getAttribute("data-color-active")==="true"&&t.current.setAttribute("data-color-active","false")}function r(d){if(t.current&&t.current.getAttribute("class")===d.target.getAttribute("class")){t.current.setAttribute("data-color-active","true");const s=t.current.getBoundingClientRect();let i=Math.round(d.clientX-s.left);i<0?i=0:i>s.width&&(i=s.width);const u=D(n.color,i/s.width*100);n.onChange(u),d.stopPropagation(),d.preventDefault()}}function l(d){if(t.current&&t.current.getAttribute("data-color-active")==="true"){const s=t.current.getBoundingClientRect();let i=Math.round(d.clientX-s.left);i<0?i=0:i>=s.width&&(i=s.width-1);const u=D(n.color,i/s.width*100);n.onChange(u),d.stopPropagation(),d.preventDefault()}}return document.addEventListener("mousedown",r),document.addEventListener("mouseup",o),document.addEventListener("mousemove",l),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",l)}},[t,n]),h.jsx("div",{ref:t,className:P.Root,children:h.jsx("div",{className:P.Indicator,style:{transform:`translate(calc(${n.position}px - 6px), -1px)`}})})}try{B.displayName="ColorChooserHue",B.__docgenInfo={description:"",displayName:"ColorChooserHue",props:{color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"RGBAColor"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(color: RGBAColor) => void"}}}}}catch{}const U="_Root_1431d_1",k="_Highlight1_1431d_10",z="_Highlight2_1431d_17",W="_Indicator_1431d_24",R={Root:U,Highlight1:k,Highlight2:z,Indicator:W};function A(e,n,a){e=1-e;let{red:t,green:o,blue:r}=a;return t=t+(255-t)*e,o=o+(255-o)*e,r=r+(255-r)*e,t=t+(0-t)*n,o=o+(0-o)*n,r=r+(0-r)*n,{red:t,green:o,blue:r,alpha:1}}function J(e,n,a,t){let o=[a.red-t.red,255-t.red,-t.red,-(255-t.red)],r=[a.green-t.green,255-t.green,-t.green,-(255-t.green)],l=[a.blue-t.blue,255-t.blue,-t.blue,-(255-t.blue)],d=[],s=[];if(Math.round(o[3])===0){d=[...o];let c=[r[0]*l[3],r[1]*l[3],r[2]*l[3],r[3]*l[3]],g=[l[0]*r[3],l[1]*r[3],l[2]*r[3],l[3]*r[3]];s=[c[0]-g[0],c[1]-g[1],c[2]-g[2],c[3]-g[3]]}else if(Math.round(r[3])===0){d=[...r];let c=[o[0]*l[3],o[1]*l[3],o[2]*l[3],o[3]*l[3]],g=[l[0]*o[3],l[1]*o[3],l[2]*o[3],l[3]*o[3]];s=[c[0]-g[0],c[1]-g[1],c[2]-g[2],c[3]-g[3]]}else if(Math.round(l[3])===0){d=[...l];let c=[o[0]*r[3],o[1]*r[3],o[2]*r[3],o[3]*r[3]],g=[r[0]*o[3],r[1]*o[3],r[2]*o[3],r[3]*o[3]];s=[c[0]-g[0],c[1]-g[1],c[2]-g[2],c[3]-g[3]]}let i=0,u=0;if(d[1]===s[1]){let c=[d[0]-s[0],d[1]-s[1],d[1]-s[2]];c[2]!==0?i=c[0]/c[2]:i=d[0]/d[2],i<0&&(i=0),o[2]*=i,o[3]*=i,r[2]*=i,r[3]*=i,l[2]*=i,l[3]*=i;let g=0,C=0,_=0;o[1]+o[3]!==0&&(g=(o[0]-o[2])/(o[1]+o[3])),r[1]+r[3]!==0&&(C=(r[0]-r[2])/(r[1]+r[3])),l[1]+l[3]!==0&&(_=(l[0]-l[2])/(l[1]+l[3])),u=1-Math.max(g,_,C)}else if(d[1]===s[2]){let c=[d[0]-s[0],d[1]-s[1],d[1]-s[2]];c[1]!==0?u=c[0]/c[1]:i=d[0]/d[2],o[1]*=u,o[3]*=u,r[1]*=u,r[3]*=u,l[1]*=u,l[3]*=u;let g=0,C=0,_=0;o[2]+o[3]!==0&&(g=(o[0]-o[1])/(o[2]+o[3])),r[2]+r[3]!==0&&(C=(r[0]-r[1])/(r[2]+r[3])),l[2]+l[3]!==0&&(_=(l[0]-l[1])/(l[2]+l[3])),u=1-Math.max(g,_,C)}else{let c=[d[0]*s[2],d[1]*s[2],d[2]*s[2]],g=[s[0]*d[2],s[1]*d[2],s[2]*d[2]],C=[c[0]-g[0],c[1]-g[1],c[2]-g[2]];C[1]!==0?u=C[0]/C[1]:i=d[0]/d[2],o[1]*=u,o[3]*=u,r[1]*=u,r[3]*=u,l[1]*=u,l[3]*=u;let _=0,$=0,E=0;o[2]+o[3]!==0&&(_=(o[0]-o[1])/(o[2]+o[3])),r[2]+r[3]!==0&&($=(r[0]-r[1])/(r[2]+r[3])),l[2]+l[3]!==0&&(E=(l[0]-l[1])/(l[2]+l[3])),u=1-Math.max(_,E,$)}let f=u*e,p=i*n;return p<0?p=0:p>n&&(p=n),f<0?f=0:f>e&&(f=e),{x:f,y:p}}function j(e){const[n,a]=m.useState({positionX:-1,positionY:-1,color:e.color,realColor:e.realColor,onChange:e.onChange}),t=m.useRef();return m.useEffect(()=>{t.current&&a(o=>{let r={width:225,height:150};if(o.positionX===-1||o.positionX===-1){let l=J(r.width,r.height,o.realColor,o.color);return{positionX:l.x,positionY:l.y,realColor:o.realColor,color:e.color,onChange:o.onChange}}else{let l=A(o.positionX/r.width,o.positionY/r.height,o.color);return o.onChange(l),{positionX:o.positionX,positionY:o.positionY,realColor:o.realColor,color:e.color,onChange:o.onChange}}})},[t,e.color]),m.useEffect(()=>{function o(d){t.current&&t.current.getAttribute("data-color-active")==="true"&&t.current.setAttribute("data-color-active","false")}function r(d){if(t.current&&t.current.getAttribute("class")===d.target.getAttribute("class")){t.current.setAttribute("data-color-active","true");let s=t.current.getBoundingClientRect(),i=Math.round(d.clientX-s.left),u=Math.round(d.clientY-s.top);i<0?i=0:i>s.width&&(i=s.width),u<0?u=0:u>s.height&&(u=s.height),a(f=>{let p=A(i/s.width,u/s.height,f.color);return f.onChange(p),{positionX:i,positionY:u,color:f.color,realColor:p,onChange:f.onChange}}),d.stopPropagation(),d.preventDefault()}}function l(d){if(t.current&&t.current.getAttribute("data-color-active")==="true"){let s=t.current.getBoundingClientRect(),i=Math.round(d.clientX-s.left),u=Math.round(d.clientY-s.top);i<0?i=0:i>s.width&&(i=s.width),u<0?u=0:u>s.height&&(u=s.height),a(f=>{let p=A(i/s.width,u/s.height,f.color);return f.onChange(p),{positionX:i,positionY:u,color:f.color,realColor:p,onChange:f.onChange}}),d.stopPropagation(),d.preventDefault()}}return document.addEventListener("mousedown",r),document.addEventListener("mouseup",o),document.addEventListener("mousemove",l),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",l)}},[t,n]),h.jsxs("div",{ref:t,className:R.Root,style:{background:`rgb(${n.color.red},${n.color.green},${n.color.blue})`},children:[h.jsx("div",{className:R.Highlight1}),h.jsx("div",{className:R.Highlight2}),h.jsx("div",{className:R.Indicator,style:{transform:`translate(calc(${n.positionX}px - 6px), calc(${n.positionY}px - 6px))`}})]})}try{j.displayName="ColorGradiant",j.__docgenInfo={description:"",displayName:"ColorGradiant",props:{realColor:{defaultValue:null,description:"",name:"realColor",required:!0,type:{name:"RGBAColor"}},color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"RGBAColor"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newColor: RGBAColor) => void"}}}}}catch{}const Q="_Root_q38gq_1",Z="_Pattern_q38gq_10",ee="_CurrentColor_q38gq_17",te="_Indicator_q38gq_23",b={Root:Q,Pattern:Z,CurrentColor:ee,Indicator:te};function G(e){const[n,a]=m.useState({alpha:e.color.alpha,onChange:e.onChange}),t=m.useRef();m.useEffect(()=>{a(r=>({...r,alpha:e.color.alpha}))},[t,e.color]),m.useEffect(()=>{function r(s){t.current&&t.current.getAttribute("data-color-active")==="true"&&t.current.setAttribute("data-color-active","false")}function l(s){if(t.current&&t.current.getAttribute("class")===s.target.getAttribute("class")){t.current.setAttribute("data-color-active","true");let i=t.current.getBoundingClientRect(),u=Math.round(s.clientX-i.left);u<0?u=0:u>i.width&&(u=i.width);let f=u/i.width;n.onChange(f),s.stopPropagation(),s.preventDefault()}}function d(s){if(t.current&&t.current.getAttribute("data-color-active")==="true"){let i=t.current.getBoundingClientRect(),u=Math.round(s.clientX-i.left);u<0?u=0:u>i.width&&(u=i.width);let f=u/i.width;n.onChange(f),s.stopPropagation(),s.preventDefault()}}return document.addEventListener("mousedown",l),document.addEventListener("mouseup",r),document.addEventListener("mousemove",d),()=>{document.removeEventListener("mousedown",l),document.removeEventListener("mouseup",r),document.removeEventListener("mousemove",d)}},[t,n]);const{color:o}=e;return h.jsxs("div",{ref:t,className:b.Root,children:[h.jsx("div",{className:b.Pattern}),h.jsx("div",{className:b.CurrentColor,style:{background:`linear-gradient(to right, rgba(${o.red}, ${o.green}, ${o.blue}, 0) 0%, rgb(${o.red}, ${o.green}, ${o.blue}) 100%)`}}),t.current&&h.jsx("div",{className:b.Indicator,style:{transform:`translate(calc(${n.alpha*165}px - 6px), 0px)`}})]})}try{G.displayName="ColorOpaque",G.__docgenInfo={description:"",displayName:"ColorOpaque",props:{color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"RGBAColor"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newAlpha: number) => void"}}}}}catch{}const ne="_Root_6d9zw_1",oe="_Pattern_6d9zw_12",re="_Display_6d9zw_18",M={Root:ne,Pattern:oe,Display:re};function N(e){const{color:n}=e;return h.jsxs("div",{className:M.Root,children:[h.jsx("div",{className:M.Pattern}),h.jsx("div",{className:M.Display,style:{background:`rgba(${n.red}, ${n.green}, ${n.blue}, ${e.alpha})`}})]})}try{N.displayName="ColorDisplay",N.__docgenInfo={description:"",displayName:"ColorDisplay",props:{color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"RGBAColor"}},alpha:{defaultValue:null,description:"",name:"alpha",required:!0,type:{name:"number"}}}}}catch{}const ae="_Root_lfqa3_1",le={Root:ae};function I(e){const[n,a]=m.useState({...e.color}),t=m.useRef(null),o=m.useRef(null),r=m.useRef(null),l=m.useRef(null),d=m.useRef(null);m.useEffect(()=>{a(e.color),d.current&&(d.current.value=x(e.color))},[e.color]);const s=f=>{const p=L(f);p&&(e.onChange(p),a(p))},i=(f,p)=>{if(p.code==="ArrowUp"){let c=parseInt(p.currentTarget.value)+1;f==="A"?c>100&&(c=100):c>255&&(c=255),u(f,c.toFixed(0))}else if(p.code==="ArrowDown"){let c=parseInt(p.currentTarget.value)-1;c<0&&(c=0),u(f,c.toFixed(0))}},u=(f,p)=>{let c=p===""?0:parseInt(p);if(!isNaN(c)){if(f==="R"){c<0?c=0:c>255&&(c=255);const g={...n,red:c};e.onChange(g),a(g)}else if(f==="G"){c<0?c=0:c>255&&(c=255);const g={...n,green:c};e.onChange(g),a(g)}else if(f==="B"){c<0?c=0:c>255&&(c=255);const g={...n,blue:c};e.onChange(g),a(g)}else if(f==="A"){c<0?c=0:c>100&&(c=100);const g={...n,alpha:c/100};e.onChange(g),a(g)}}};return h.jsxs("div",{className:le.Root,children:[h.jsx("input",{ref:t,...e.inputProps,value:n.red.toFixed(0),onKeyDown:f=>i("R",f),onChange:f=>{u("R",f.target.value)}}),h.jsx("input",{ref:o,...e.inputProps,value:n.green.toFixed(0),onKeyDown:f=>i("G",f),onChange:f=>{u("G",f.target.value)}}),h.jsx("input",{ref:r,...e.inputProps,value:n.blue.toFixed(0),onKeyDown:f=>i("B",f),onChange:f=>{u("B",f.target.value)}}),h.jsx("input",{ref:l,...e.inputProps,value:(n.alpha*100).toFixed(0),onKeyDown:f=>i("A",f),onChange:f=>{u("A",f.target.value)}}),h.jsx("input",{ref:d,...e.inputProps,defaultValue:x(n),onChange:f=>{s(f.target.value)}}),h.jsx(v,{component:"span",children:" R "}),h.jsx(v,{component:"span",children:" G "}),h.jsx(v,{component:"span",children:" B "}),h.jsx(v,{component:"span",children:" A% "}),h.jsx(v,{component:"span",children:"Hex"})]})}try{I.displayName="ColorRGBAInput",I.__docgenInfo={description:"",displayName:"ColorRGBAInput",props:{color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"RGBAColor"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(color: RGBAColor) => void"}},inputProps:{defaultValue:null,description:"",name:"inputProps",required:!1,type:{name:"InputHTMLAttributes<HTMLInputElement>"}}}}}catch{}function w(e){if(typeof e=="string"){if(!e.startsWith("#")){const a=X(e);a!==void 0&&(e=a)}const n=L(e);return n||{red:0,green:0,blue:0,alpha:1}}else return e}function V(e){let{red:n,green:a,blue:t}=e;if(n===a&&n===t)n=255,a=0,t=0;else{const r=Math.min(n,Math.min(a,t));n-=r,a-=r,t-=r;let l=1;n>a&&n>t?l=255/n:a>n&&a>t?l=255/a:l=255/t,n*=l,a*=l,t*=l,n=Math.round(n),a=Math.round(a),t=Math.round(t)}return{red:Math.max(0,Math.min(255,n)),green:Math.max(0,Math.min(255,a)),blue:Math.max(0,Math.min(255,t)),alpha:1}}function H(e){const[n,a]=m.useState(w(e.color)),[t,o]=m.useState(V(w(e.color))),[r,l]=m.useState(n.alpha),[d,s]=m.useState(q());return m.useEffect(()=>{a(w(e.color))},[e.color]),h.jsxs("div",{className:y.Root,children:[h.jsx(j,{realColor:n,color:t,onChange:i=>{a(i);const u={...i,alpha:r};e.onChange&&e.onChange(u,"#"+x(u))}},"gradiant_"+d),h.jsxs("div",{className:y.Options,children:[h.jsx(N,{color:n,alpha:r}),h.jsx(B,{color:t,onChange:i=>{o(i)}}),h.jsx(G,{color:{...n,alpha:r},onChange:i=>{l(i);const u={...n,alpha:i};e.onChange&&e.onChange(u,"#"+x(u))}})]},"detail_"+d),h.jsx("div",{className:y.Input,children:h.jsx(I,{color:{...n,alpha:r},onChange:i=>{a(i),l(i.alpha),o(V(i)),s(q());const u={...i,alpha:i.alpha};e.onChange&&e.onChange(u,"#"+x(u))}})})]})}try{H.displayName="ColorChooser",H.__docgenInfo={description:"",displayName:"ColorChooser",props:{color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"string | RGBAColor"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((color: RGBAColor, colorHex: string) => void)"}}}}}catch{}export{H as C};
