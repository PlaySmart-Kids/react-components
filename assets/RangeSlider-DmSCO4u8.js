import{j as r}from"./jsx-runtime-CkxqCPlQ.js";import{I as he,v as ze,h as Be,a as ge}from"./IndicatorLabel-DNRmLhG1.js";import{j as De,k as Z,G as ke,l as ee,m as Ge,N as ye,n as Oe,c as u,d as ve,M as Se,a as Xe,C as Ye,f as He,g as Ue,o as Je}from"./DefaultThemeProvider-DB5yquFP.js";import{R as Ke}from"./index-DJbli8uv.js";import{N as be,a as xe}from"./index-DjY7dx8f.js";import{S as te}from"./ShapeType-C4Gft0bY.js";import{r as _}from"./index-DJO9vBfz.js";import{G as ae}from"./DomUtil-DAqrhrKT.js";const Ie=_.forwardRef((o,we)=>{const[S,ne]=_.useState(o.values),h=_.useRef(),g=_.useRef(),{iconStart:B,iconEnd:D,size:Re,color:Ce,hue:Te,onChange:re,disabled:E,max:W,min:b,step:L,showSteps:Ve,fullWidth:Me,orientation:Ne,snapToStep:P,thumbShape:k,labelPosition:T,labelRenderer:ie}=o;let c=o.minFraction===void 0?0:o.minFraction,d=o.maxFraction===void 0?0:o.maxFraction;if(c>d){const e=c;c=d,d=e}_.useEffect(()=>{ne(e=>e[0]===o.values[0]&&e[1]===o.values[1]?e:o.values.map(t=>parseFloat(be(t,c,d))))},[d,c,o.values]);const N=He(Ce),A=Ue(Te),G=Math.max(W,b),O=Math.min(W,b),y=G-O,X=Je(Re);let q=Math.min(S[0],S[1]),$=Math.max(S[0],S[1]);q=Math.max(Math.min(q,G),O),$=Math.max(Math.min($,G),O);const i=L?Math.abs(L):1,x=X===De.SMALL,V=ae(x?12:20),le=ae(x?5:7),Y=ae(x?7:9),R=y===0?0:(q-b)*100/y,M=y===0?0:($-b)*100/y,oe=100-M,a=Ne==="vertical",n=a?ze:Be,se=Z(N,A),Ae=ke(N,ee(ee(A))),z=Ge(N,ye(A)),ue=Z(N,ee(A)),ce=Oe(N,A),de=e=>{if(!h.current||!g.current)return;const t=parseFloat(h.current.getAttribute("data-value")),I=[parseFloat(g.current.getAttribute("data-value")),t];U(I)},qe=e=>{if(!h.current||!g.current)return;e.preventDefault(),e.stopPropagation();const t=e.currentTarget.querySelectorAll("span"),l=t.item(3),I=t.item(4),v=H(l,e.clientX,e.clientY),C=H(I,e.clientX,e.clientY);v?(t.item(3).style.outlineWidth=`${Y}px`,t.item(4).style.outlineWidth="",e.currentTarget.setAttribute("data-pressed-from","upper")):C&&(t.item(4).style.outlineWidth=`${Y}px`,t.item(3).style.outlineWidth="",e.currentTarget.setAttribute("data-pressed-from","lower"))},H=(e,t,l)=>ge(e.getBoundingClientRect(),t,l)?(e.style.outlineWidth===""&&(e.style.outlineWidth=`${le}px`),!0):(e.style.outlineWidth!==""&&(e.style.outlineWidth=""),!1),$e=e=>{if(!h.current||!g.current)return;e.preventDefault(),e.stopPropagation();const t=e.currentTarget.getAttribute("data-pressed-from"),l=e.currentTarget.querySelectorAll("span"),I=l.item(3),v=l.item(4),C=t==="upper"?I:v,s=t==="upper"?h:g;if(t!==null&&e.currentTarget.getAttribute("data-ignore-move")===null&&s.current){H(C,e.clientX,e.clientY);const m=e.currentTarget.getBoundingClientRect();let p=a?m.height-(e.clientY-m.top):e.clientX-m.left;const w=a?m.height:m.width;p<0?p=0:p>w&&(p=w);let f=p/w*y+b;i&&P&&(f=Math.round(f/i)*i);const J=t==="upper"?[S[0],f]:[f,S[1]];l.item(0).style.transition="none",l.item(1).style.transition="none",l.item(2).style.transition="none",l.item(3).style.transition="none",l.item(4).style.transition="none",U(J),e.currentTarget.querySelectorAll("div[data-label='true']").forEach(K=>K.style.transition="none")}},je=e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.removeAttribute("data-pressed-from");const t=e.currentTarget.querySelectorAll("span");t.item(0).style.transition="",t.item(1).style.transition="",t.item(2).style.transition="",t.item(3).style.transition="",t.item(4).style.transition="",t.item(3).style.outlineWidth="",t.item(4).style.outlineWidth="",e.currentTarget.querySelectorAll("div[data-label='true']").forEach(l=>l.style.transition="")};function U(e){ne(e),re&&re(e)}const Fe=e=>{if(!h.current||!g.current)return;e.stopPropagation(),e.preventDefault();const t=e.currentTarget.getBoundingClientRect(),l=e.clientX,I=e.clientY;let v=a?t.height-(I-t.top):l-t.left;const C=a?t.height:t.width;v<0?v=0:v>C&&(v=C);let s=v/C*y+b;i&&P&&(s=Math.round(s/i)*i);let m=parseFloat(h.current.getAttribute("data-value")),p=parseFloat(g.current.getAttribute("data-value"));i&&P&&(m=Math.round(m/i)*i),i&&P&&(p=Math.round(p/i)*i);const w=(m+p)/2,f=e.currentTarget.querySelectorAll("span"),J=f.item(3),K=f.item(4),Q=s<w?g:h,j=s<w?K:J,Ee=s>=w?s:m,We=s<w?s:p,Le=[xe(We,c,d),xe(Ee,c,d)];if(Q&&Q.current){Q.current.value=be(s,c,d);const F=e.currentTarget;j.style.outlineWidth=`${Y}px`,j.style.transition="",f.item(0).style.transition="",f.item(1).style.transition="",f.item(2).style.transition="",e.currentTarget.querySelectorAll("div[data-label='true']").forEach(Pe=>Pe.style.transition=""),F.removeAttribute("data-pressed-from");const pe=F.getAttribute("data-ignore-move");pe!=null&&window.clearInterval(parseInt(pe));const fe=window.setInterval(()=>{F.getAttribute("data-pressed-from")===null&&(F.removeAttribute("data-ignore-move"),ge(j.getBoundingClientRect(),l,I)?j.style.outlineWidth=`${le}px`:j.style.outlineWidth="",window.clearInterval(fe))},300);F.setAttribute("data-ignore-move",fe.toFixed()),U(Le)}};function _e(){return Ve&&i!==void 0&&i>0?r.jsx("div",{className:u(n.StepsPanel,x?n.SmallStepsPanel:void 0),style:{gridTemplateColumns:a?void 0:`repeat(${Math.round(y/i)},1fr)`,gridTemplateRows:a?`repeat(${Math.round(y/i)},1fr)`:void 0},children:Ke(1,Math.round(y/i)).map(e=>r.jsx("div",{className:Ae,children:"Â "},`slider_step_${e}`))}):null}const me=k===te.CIRCLE?n.IndicatorCircle:k===te.ROUNDED?n.IndicatorRounded:k===te.RECTANGLE?n.IndicatorRectangle:n.IndicatorCircle;return r.jsxs("div",{ref:we,className:u(n.Root,x?n.RootSmall:void 0,Me?a?ve.FullHeight:ve.FullWidth:void 0),children:[r.jsx("div",{children:typeof B=="string"?r.jsx(Se,{name:B}):B}),r.jsxs("div",{className:u(n.BarPanel),onClick:Fe,onMouseDown:qe,onMouseMove:$e,onMouseOut:je,children:[r.jsxs("div",{className:u(n.Bar,x?n.SmallBar:void 0,Z(Ye.SECONDARY,ye(Xe.LIGHT))),children:[_e(),r.jsx("input",{ref:g,tabIndex:-1,type:"range",onChange:de,"data-indicator-type":"lower",disabled:E,max:W,min:b,step:L,value:q,"data-value":q}),r.jsx("input",{ref:h,tabIndex:-1,type:"range","data-indicator-type":"upper",onChange:de,disabled:E,max:W,min:b,step:L,value:$,"data-value":$}),r.jsx("span",{className:u(z),style:{width:a?void 0:`${R}%`,height:a?`${oe}%`:void 0}}),r.jsx("span",{className:u(se),style:{width:a?void 0:`${M-R}%`,height:a?`${M-R}%`:void 0}}),r.jsx("span",{className:u(z),style:{width:a?void 0:`${oe}%`,height:a?`${R}%`:void 0}})]}),T&&r.jsx(he,{size:X,className:u(n.IndicatorLabel,T==="start"?n.IndicatorLabelStart:n.IndicatorLabelEnd),usedPercent:R,isVertical:a,indicatorSize:V,position:T,value:S[0],labelRenderer:ie,minFraction:c,maxFraction:d}),T&&r.jsx(he,{size:X,className:u(n.IndicatorLabel,T==="start"?n.IndicatorLabelStart:n.IndicatorLabelEnd),usedPercent:M,isVertical:a,indicatorSize:V,position:T,value:S[1],labelRenderer:ie,minFraction:c,maxFraction:d}),r.jsx("span",{className:u(n.Indicator,me,ue,ce,x?n.IndicatorSmall:void 0),"data-indicator-type":"upper",style:{left:a?void 0:`calc(${M}% - ${V/2}px)`,top:a?`calc(${100-M}% - ${V/2}px)`:void 0,pointerEvents:E?"none":void 0}}),r.jsx("span",{className:u(n.Indicator,me,ue,ce,x?n.IndicatorSmall:void 0),"data-indicator-type":"lower",style:{left:a?void 0:`calc(${R}% - ${V/2}px)`,top:a?`calc(${100-R}% - ${V/2}px)`:void 0,pointerEvents:E?"none":void 0}})]}),r.jsx("div",{children:typeof D=="string"?r.jsx(Se,{name:D}):D})]})});try{Ie.displayName="RangeSlider",Ie.__docgenInfo={description:"",displayName:"RangeSlider",props:{iconStart:{defaultValue:null,description:"",name:"iconStart",required:!1,type:{name:"ReactNode"}},iconEnd:{defaultValue:null,description:"",name:"iconEnd",required:!1,type:{name:"ReactNode"}},hue:{defaultValue:null,description:"",name:"hue",required:!1,type:{name:"string"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"string | SmallComponentSize"}},fullWidth:{defaultValue:null,description:"",name:"fullWidth",required:!1,type:{name:"boolean"}},max:{defaultValue:null,description:"",name:"max",required:!0,type:{name:"number"}},min:{defaultValue:null,description:"",name:"min",required:!0,type:{name:"number"}},snapToStep:{defaultValue:null,description:"",name:"snapToStep",required:!1,type:{name:"boolean"}},thumbShape:{defaultValue:null,description:"",name:"thumbShape",required:!1,type:{name:"enum",value:[{value:'"circle"'},{value:'"rounded"'},{value:'"rectangle"'}]}},showSteps:{defaultValue:null,description:"",name:"showSteps",required:!1,type:{name:"boolean"}},orientation:{defaultValue:null,description:"",name:"orientation",required:!1,type:{name:"enum",value:[{value:'"horizontal"'},{value:'"vertical"'}]}},minFraction:{defaultValue:null,description:"",name:"minFraction",required:!1,type:{name:"number"}},maxFraction:{defaultValue:null,description:"",name:"maxFraction",required:!1,type:{name:"number"}},labelPosition:{defaultValue:null,description:"",name:"labelPosition",required:!1,type:{name:"enum",value:[{value:'""'},{value:'"start"'},{value:'"end"'}]}},labelRenderer:{defaultValue:null,description:"",name:"labelRenderer",required:!1,type:{name:"((number: string | number) => ReactNode)"}},values:{defaultValue:null,description:"",name:"values",required:!0,type:{name:"number[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: number[]) => void"}}}}}catch{}export{Ie as R};
