import{j as m}from"./jsx-runtime-CkxqCPlQ.js";import{r as s}from"./index-DJO9vBfz.js";import{r as _}from"./index-Cp9I2zMD.js";import"./useTimeout-dnlj8An_.js";import{t as y,A as c}from"./DefaultThemeProvider-DB5yquFP.js";import{G as i}from"./DomUtil-DAqrhrKT.js";function P(){const[r,e]=s.useState(null);return s.useEffect(()=>{const n=()=>{e({width:window.innerWidth,height:window.innerHeight})};return r==null&&e({width:window.innerWidth,height:window.innerHeight}),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[r]),r}const x="_Backdrop_1sto4_1",R="_Popup_1sto4_14",h={Backdrop:x,Popup:R};function C(r,e){for(;e!==r&&e;)e=e==null?void 0:e.parentElement;return e===r}function w(r){const{shiftY:e,shiftX:n,onClose:d,anchorRef:a,children:E}=r,o=s.useRef(null),v=P(),[u,f]=s.useState({left:0,top:0}),l=r.anchor?y(r.anchor):c.SOUTH;return s.useEffect(()=>{const t=g=>{C(o.current,g.target)||d&&d()},p=o&&o.current;return p&&(document.addEventListener("click",t,!0),document.addEventListener("wheel",t,!0)),()=>{p&&(document.removeEventListener("click",t,!0),document.removeEventListener("wheel",t,!0))}},[d,o]),s.useEffect(()=>{if(a){const t=a.getBoundingClientRect();l===c.SOUTH?f({left:t.left+(n?i(n):0),top:t.top+t.height+(e?i(e):0)}):l===c.EAST||l===c.END?f({left:t.left+t.width+(n?i(n):0),top:t.top+(e?i(e):0)}):l===c.NORTH&&o.current&&o.current.firstChild?f({left:t.left+(n?i(n):0),top:t.top-o.current.firstChild.clientHeight-(e?i(e):0)}):o.current&&o.current.firstChild&&f({left:t.x-o.current.firstChild.clientWidth-(n?i(n):0),top:t.top+(e?i(e):0)})}},[v,a,n,e,l]),a?_.createPortal(m.jsx("div",{ref:o,className:h.Backdrop,children:m.jsx("div",{className:h.Popup,style:{top:u.top,left:u.left,bottom:u.bottom,right:u.right},children:E})}),document.body):null}try{w.displayName="Popover",w.__docgenInfo={description:"",displayName:"Popover",props:{anchorRef:{defaultValue:null,description:"",name:"anchorRef",required:!1,type:{name:"HTMLElement"}},anchor:{defaultValue:null,description:"",name:"anchor",required:!1,type:{name:"string"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void)"}},shiftX:{defaultValue:null,description:"",name:"shiftX",required:!1,type:{name:"number"}},shiftY:{defaultValue:null,description:"",name:"shiftY",required:!1,type:{name:"number"}}}}}catch{}export{w as P};
