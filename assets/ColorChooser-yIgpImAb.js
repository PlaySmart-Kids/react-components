import{j as g}from"./jsx-runtime-CkxqCPlQ.js";import{r as m}from"./index-DJO9vBfz.js";import{T as v}from"./DefaultThemeProvider-Ce-zb_Sa.js";import{R,H as L}from"./ColorUtil-b9QtJkc2.js";import{n as q}from"./index.browser-vcSNLBTf.js";function X(n){const t=document.createElement("canvas").getContext("2d");if(t)return t.fillStyle=n,t.fillStyle}const T="_Root_i475m_1",Y="_Options_i475m_9",S="_Input_i475m_15",b={Root:T,Options:Y,Input:S},F="_Root_evjr2_1",O="_Indicator_evjr2_11",P={Root:F,Indicator:O};function D(n,t){let d=0;const e={...n};return t>83?(d=255*(t-83)/17,e.red=255,e.green=0,e.blue=255-Math.round(d)):t>67?(d=255*(t-67)/16,e.red=Math.round(d),e.green=0,e.blue=255):t>50?(d=255*(t-50)/17,e.red=0,e.green=255-Math.round(d),e.blue=255):t>33?(d=255*(t-33)/17,e.red=0,e.green=255,e.blue=Math.round(d)):t>17?(d=255*(t-17)/16,e.red=255-Math.round(d),e.green=255,e.blue=0):(d=255*t/17,e.red=255,e.green=Math.round(d),e.blue=0),e}function K(n,t){return t.red===255?t.blue!==0?n*(1-.17*(t.blue/255)):t.green!==0?n*.17*(t.green/255):0:t.blue===255?t.red!==0?n*(.67+.17*(t.red/255)):t.green!==0?n*(.67-.17*(t.green/255)):n*.67:t.green===255?t.red!==0?n*(.33-.16*(t.red/255)):t.blue!==0?n*(.33+.17*(t.blue/255)):n*.33:0}function B(n){const[t,d]=m.useState({position:0,color:n.color,onChange:n.onChange}),e=m.useRef();return m.useEffect(()=>{e.current&&d(o=>({position:K(165,n.color),color:n.color,onChange:o.onChange}))},[e,n.color]),m.useEffect(()=>{function o(c){e.current&&e.current.getAttribute("data-color-active")==="true"&&e.current.setAttribute("data-color-active","false")}function r(c){if(e.current&&e.current.getAttribute("class")===c.target.getAttribute("class")){e.current.setAttribute("data-color-active","true");const s=e.current.getBoundingClientRect();let l=Math.round(c.clientX-s.left);l<0?l=0:l>s.width&&(l=s.width);const i=D(t.color,l/s.width*100);t.onChange(i),c.stopPropagation(),c.preventDefault()}}function a(c){if(e.current&&e.current.getAttribute("data-color-active")==="true"){const s=e.current.getBoundingClientRect();let l=Math.round(c.clientX-s.left);l<0?l=0:l>=s.width&&(l=s.width-1);const i=D(t.color,l/s.width*100);t.onChange(i),c.stopPropagation(),c.preventDefault()}}return document.addEventListener("mousedown",r),document.addEventListener("mouseup",o),document.addEventListener("mousemove",a),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",a)}},[e,t]),g.jsx("div",{ref:e,className:P.Root,children:g.jsx("div",{className:P.Indicator,style:{transform:`translate(calc(${t.position}px - 6px), -1px)`}})})}try{B.displayName="ColorChooserHue",B.__docgenInfo={description:"",displayName:"ColorChooserHue",props:{color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"RGBAColor"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(color: RGBAColor) => void"}}}}}catch{}const U="_Root_1431d_1",k="_Highlight1_1431d_10",z="_Highlight2_1431d_17",W="_Indicator_1431d_24",x={Root:U,Highlight1:k,Highlight2:z,Indicator:W};function A(n,t,d){n=1-n;let{red:e,green:o,blue:r}=d;return e=e+(255-e)*n,o=o+(255-o)*n,r=r+(255-r)*n,e=e+(0-e)*t,o=o+(0-o)*t,r=r+(0-r)*t,{red:e,green:o,blue:r,alpha:1}}function J(n,t,d,e){let o=[d.red-e.red,255-e.red,-e.red,-(255-e.red)],r=[d.green-e.green,255-e.green,-e.green,-(255-e.green)],a=[d.blue-e.blue,255-e.blue,-e.blue,-(255-e.blue)],c=[],s=[];if(Math.round(o[3])===0){c=[...o];let u=[r[0]*a[3],r[1]*a[3],r[2]*a[3],r[3]*a[3]],h=[a[0]*r[3],a[1]*r[3],a[2]*r[3],a[3]*r[3]];s=[u[0]-h[0],u[1]-h[1],u[2]-h[2],u[3]-h[3]]}else if(Math.round(r[3])===0){c=[...r];let u=[o[0]*a[3],o[1]*a[3],o[2]*a[3],o[3]*a[3]],h=[a[0]*o[3],a[1]*o[3],a[2]*o[3],a[3]*o[3]];s=[u[0]-h[0],u[1]-h[1],u[2]-h[2],u[3]-h[3]]}else if(Math.round(a[3])===0){c=[...a];let u=[o[0]*r[3],o[1]*r[3],o[2]*r[3],o[3]*r[3]],h=[r[0]*o[3],r[1]*o[3],r[2]*o[3],r[3]*o[3]];s=[u[0]-h[0],u[1]-h[1],u[2]-h[2],u[3]-h[3]]}let l=0,i=0;if(c[1]===s[1]){let u=[c[0]-s[0],c[1]-s[1],c[1]-s[2]];u[2]!==0?l=u[0]/u[2]:l=c[0]/c[2],l<0&&(l=0),o[2]*=l,o[3]*=l,r[2]*=l,r[3]*=l,a[2]*=l,a[3]*=l;let h=0,p=0,_=0;o[1]+o[3]!==0&&(h=(o[0]-o[2])/(o[1]+o[3])),r[1]+r[3]!==0&&(p=(r[0]-r[2])/(r[1]+r[3])),a[1]+a[3]!==0&&(_=(a[0]-a[2])/(a[1]+a[3])),i=1-Math.max(h,_,p)}else if(c[1]===s[2]){let u=[c[0]-s[0],c[1]-s[1],c[1]-s[2]];u[1]!==0?i=u[0]/u[1]:l=c[0]/c[2],o[1]*=i,o[3]*=i,r[1]*=i,r[3]*=i,a[1]*=i,a[3]*=i;let h=0,p=0,_=0;o[2]+o[3]!==0&&(h=(o[0]-o[1])/(o[2]+o[3])),r[2]+r[3]!==0&&(p=(r[0]-r[1])/(r[2]+r[3])),a[2]+a[3]!==0&&(_=(a[0]-a[1])/(a[2]+a[3])),i=1-Math.max(h,_,p)}else{let u=[c[0]*s[2],c[1]*s[2],c[2]*s[2]],h=[s[0]*c[2],s[1]*c[2],s[2]*c[2]],p=[u[0]-h[0],u[1]-h[1],u[2]-h[2]];p[1]!==0?i=p[0]/p[1]:l=c[0]/c[2],o[1]*=i,o[3]*=i,r[1]*=i,r[3]*=i,a[1]*=i,a[3]*=i;let _=0,E=0,$=0;o[2]+o[3]!==0&&(_=(o[0]-o[1])/(o[2]+o[3])),r[2]+r[3]!==0&&(E=(r[0]-r[1])/(r[2]+r[3])),a[2]+a[3]!==0&&($=(a[0]-a[1])/(a[2]+a[3])),i=1-Math.max(_,$,E)}let f=i*n,C=l*t;return C<0?C=0:C>t&&(C=t),f<0?f=0:f>n&&(f=n),{x:f,y:C}}function j(n){const[t,d]=m.useState({positionX:-1,positionY:-1,color:n.color,realColor:n.realColor,onChange:n.onChange}),e=m.useRef();return m.useEffect(()=>{e.current&&d(o=>{let r={width:225,height:150};if(o.positionX===-1||o.positionX===-1){let a=J(r.width,r.height,o.realColor,o.color);return{positionX:a.x,positionY:a.y,realColor:o.realColor,color:n.color,onChange:o.onChange}}else{let a=A(o.positionX/r.width,o.positionY/r.height,o.color);return o.onChange(a),{positionX:o.positionX,positionY:o.positionY,realColor:o.realColor,color:n.color,onChange:o.onChange}}})},[e,n.color]),m.useEffect(()=>{function o(c){e.current&&e.current.getAttribute("data-color-active")==="true"&&e.current.setAttribute("data-color-active","false")}function r(c){if(e.current&&e.current.getAttribute("class")===c.target.getAttribute("class")){e.current.setAttribute("data-color-active","true");let s=e.current.getBoundingClientRect(),l=Math.round(c.clientX-s.left),i=Math.round(c.clientY-s.top);l<0?l=0:l>s.width&&(l=s.width),i<0?i=0:i>s.height&&(i=s.height),d(f=>{let C=A(l/s.width,i/s.height,f.color);return f.onChange(C),{positionX:l,positionY:i,color:f.color,realColor:C,onChange:f.onChange}}),c.stopPropagation(),c.preventDefault()}}function a(c){if(e.current&&e.current.getAttribute("data-color-active")==="true"){let s=e.current.getBoundingClientRect(),l=Math.round(c.clientX-s.left),i=Math.round(c.clientY-s.top);l<0?l=0:l>s.width&&(l=s.width),i<0?i=0:i>s.height&&(i=s.height),d(f=>{let C=A(l/s.width,i/s.height,f.color);return f.onChange(C),{positionX:l,positionY:i,color:f.color,realColor:C,onChange:f.onChange}}),c.stopPropagation(),c.preventDefault()}}return document.addEventListener("mousedown",r),document.addEventListener("mouseup",o),document.addEventListener("mousemove",a),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",a)}},[e,t]),g.jsxs("div",{ref:e,className:x.Root,style:{background:`rgb(${t.color.red},${t.color.green},${t.color.blue})`},children:[g.jsx("div",{className:x.Highlight1}),g.jsx("div",{className:x.Highlight2}),g.jsx("div",{className:x.Indicator,style:{transform:`translate(calc(${t.positionX}px - 6px), calc(${t.positionY}px - 6px))`}})]})}try{j.displayName="ColorGradiant",j.__docgenInfo={description:"",displayName:"ColorGradiant",props:{realColor:{defaultValue:null,description:"",name:"realColor",required:!0,type:{name:"RGBAColor"}},color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"RGBAColor"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newColor: RGBAColor) => void"}}}}}catch{}const Q="_Root_q38gq_1",Z="_Pattern_q38gq_10",ee="_CurrentColor_q38gq_17",te="_Indicator_q38gq_23",y={Root:Q,Pattern:Z,CurrentColor:ee,Indicator:te};function G(n){const[t,d]=m.useState({alpha:n.color.alpha,onChange:n.onChange}),e=m.useRef();m.useEffect(()=>{d(r=>({...r,alpha:n.color.alpha}))},[e,n.color]),m.useEffect(()=>{function r(s){e.current&&e.current.getAttribute("data-color-active")==="true"&&e.current.setAttribute("data-color-active","false")}function a(s){if(e.current&&e.current.getAttribute("class")===s.target.getAttribute("class")){e.current.setAttribute("data-color-active","true");let l=e.current.getBoundingClientRect(),i=Math.round(s.clientX-l.left);i<0?i=0:i>l.width&&(i=l.width);let f=i/l.width;t.onChange(f),s.stopPropagation(),s.preventDefault()}}function c(s){if(e.current&&e.current.getAttribute("data-color-active")==="true"){let l=e.current.getBoundingClientRect(),i=Math.round(s.clientX-l.left);i<0?i=0:i>l.width&&(i=l.width);let f=i/l.width;t.onChange(f),s.stopPropagation(),s.preventDefault()}}return document.addEventListener("mousedown",a),document.addEventListener("mouseup",r),document.addEventListener("mousemove",c),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("mouseup",r),document.removeEventListener("mousemove",c)}},[e,t]);const{color:o}=n;return g.jsxs("div",{ref:e,className:y.Root,children:[g.jsx("div",{className:y.Pattern}),g.jsx("div",{className:y.CurrentColor,style:{background:`linear-gradient(to right, rgba(${o.red}, ${o.green}, ${o.blue}, 0) 0%, rgb(${o.red}, ${o.green}, ${o.blue}) 100%)`}}),e.current&&g.jsx("div",{className:y.Indicator,style:{transform:`translate(calc(${t.alpha*165}px - 6px), 0px)`}})]})}try{G.displayName="ColorOpaque",G.__docgenInfo={description:"",displayName:"ColorOpaque",props:{color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"RGBAColor"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newAlpha: number) => void"}}}}}catch{}const oe="_Root_6d9zw_1",ne="_Pattern_6d9zw_12",re="_Display_6d9zw_18",w={Root:oe,Pattern:ne,Display:re};function N(n){const{color:t}=n;return g.jsxs("div",{className:w.Root,children:[g.jsx("div",{className:w.Pattern}),g.jsx("div",{className:w.Display,style:{background:`rgba(${t.red}, ${t.green}, ${t.blue}, ${n.alpha})`}})]})}try{N.displayName="ColorDisplay",N.__docgenInfo={description:"",displayName:"ColorDisplay",props:{color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"RGBAColor"}},alpha:{defaultValue:null,description:"",name:"alpha",required:!0,type:{name:"number"}}}}}catch{}const ae="_Root_lfqa3_1",le={Root:ae};function I(n){const[t,d]=m.useState({...n.color}),e=m.useRef(null),o=m.useRef(null),r=m.useRef(null),a=m.useRef(null),c=m.useRef(null);m.useEffect(()=>{d(n.color),c.current&&(c.current.value=R(n.color))},[n.color]);const s=f=>{const C=L(f);C&&(n.onChange(C),d(C))},l=(f,C)=>{if(C.code==="ArrowUp"){let u=parseInt(C.currentTarget.value)+1;f==="A"?u>100&&(u=100):u>255&&(u=255),i(f,u.toFixed(0))}else if(C.code==="ArrowDown"){let u=parseInt(C.currentTarget.value)-1;u<0&&(u=0),i(f,u.toFixed(0))}},i=(f,C)=>{let u=C===""?0:parseInt(C);if(!isNaN(u)){if(f==="R"){u<0?u=0:u>255&&(u=255);const h={...t,red:u};n.onChange(h),d(h)}else if(f==="G"){u<0?u=0:u>255&&(u=255);const h={...t,green:u};n.onChange(h),d(h)}else if(f==="B"){u<0?u=0:u>255&&(u=255);const h={...t,blue:u};n.onChange(h),d(h)}else if(f==="A"){u<0?u=0:u>100&&(u=100);const h={...t,alpha:u/100};n.onChange(h),d(h)}}};return g.jsxs("div",{className:le.Root,children:[g.jsx("input",{ref:e,...n.inputProps,value:t.red.toFixed(0),onKeyDown:f=>l("R",f),onChange:f=>{i("R",f.target.value)}}),g.jsx("input",{ref:o,...n.inputProps,value:t.green.toFixed(0),onKeyDown:f=>l("G",f),onChange:f=>{i("G",f.target.value)}}),g.jsx("input",{ref:r,...n.inputProps,value:t.blue.toFixed(0),onKeyDown:f=>l("B",f),onChange:f=>{i("B",f.target.value)}}),g.jsx("input",{ref:a,...n.inputProps,value:(t.alpha*100).toFixed(0),onKeyDown:f=>l("A",f),onChange:f=>{i("A",f.target.value)}}),g.jsx("input",{ref:c,...n.inputProps,defaultValue:R(t),onChange:f=>{s(f.target.value)}}),g.jsx(v,{component:"span",children:" R "}),g.jsx(v,{component:"span",children:" G "}),g.jsx(v,{component:"span",children:" B "}),g.jsx(v,{component:"span",children:" A% "}),g.jsx(v,{component:"span",children:"Hex"})]})}try{I.displayName="ColorRGBAInput",I.__docgenInfo={description:"",displayName:"ColorRGBAInput",props:{color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"RGBAColor"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(color: RGBAColor) => void"}},inputProps:{defaultValue:null,description:"",name:"inputProps",required:!1,type:{name:"InputHTMLAttributes<HTMLInputElement>"}}}}}catch{}function M(n){if(typeof n=="string"){if(!n.startsWith("#")){const d=X(n);d!==void 0&&(n=d)}const t=L(n);return t||{red:0,green:0,blue:0,alpha:1}}else return n}function V(n){let{red:t,green:d,blue:e}=n;if(t===d&&t===e)t=255,d=0,e=0;else{const r=Math.min(t,Math.min(d,e));t-=r,d-=r,e-=r;let a=1;t>d&&t>e?a=255/t:d>t&&d>e?a=255/d:a=255/e,t*=a,d*=a,e*=a,t=Math.round(t),d=Math.round(d),e=Math.round(e)}return{red:Math.max(0,Math.min(255,t)),green:Math.max(0,Math.min(255,d)),blue:Math.max(0,Math.min(255,e)),alpha:1}}function H(n){const[t,d]=m.useState(M(n.color)),[e,o]=m.useState(V(M(n.color))),[r,a]=m.useState(t.alpha),[c,s]=m.useState(q());return m.useEffect(()=>{d(M(n.color))},[n.color]),g.jsxs("div",{className:b.Root,children:[g.jsx(j,{realColor:t,color:e,onChange:l=>{d(l);const i={...l,alpha:r};n.onChange&&n.onChange(i,"#"+R(i))}},"gradiant_"+c),g.jsxs("div",{className:b.Options,children:[g.jsx(N,{color:t,alpha:r}),g.jsx(B,{color:e,onChange:l=>{o(l)}}),g.jsx(G,{color:{...t,alpha:r},onChange:l=>{a(l);const i={...t,alpha:l};n.onChange&&n.onChange(i,"#"+R(i))}})]},"detail_"+c),g.jsx("div",{className:b.Input,children:g.jsx(I,{color:{...t,alpha:r},onChange:l=>{d(l),a(l.alpha),o(V(l)),s(q());const i={...l,alpha:l.alpha};n.onChange&&n.onChange(i,"#"+R(i))}})})]})}try{H.displayName="ColorChooser",H.__docgenInfo={description:"",displayName:"ColorChooser",props:{color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"string | RGBAColor"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((color: RGBAColor, colorHex: string) => void)"}}}}}catch{}export{H as C};
