import{j as g,a as v}from"./DefaultThemeProvider-DIgWkiEK.js";import{r as m}from"./index-BwDkhjyp.js";import{T as R}from"./ProfileLink-BbZ_QnTw.js";import{R as y,H as T}from"./ColorUtil-qZH_9PUB.js";import{n as D}from"./index.browser-vcSNLBTf.js";function Y(n){const t=document.createElement("canvas").getContext("2d");if(t)return t.fillStyle=n,t.fillStyle}const S="_Root_i475m_1",F="_Options_i475m_9",O="_Input_i475m_15",w={Root:S,Options:F,Input:O},j="_Root_evjr2_1",K="_Indicator_evjr2_11",V={Root:j,Indicator:K};function H(n,t){let d=0;const e={...n};return t>83?(d=255*(t-83)/17,e.red=255,e.green=0,e.blue=255-Math.round(d)):t>67?(d=255*(t-67)/16,e.red=Math.round(d),e.green=0,e.blue=255):t>50?(d=255*(t-50)/17,e.red=0,e.green=255-Math.round(d),e.blue=255):t>33?(d=255*(t-33)/17,e.red=0,e.green=255,e.blue=Math.round(d)):t>17?(d=255*(t-17)/16,e.red=255-Math.round(d),e.green=255,e.blue=0):(d=255*t/17,e.red=255,e.green=Math.round(d),e.blue=0),e}function U(n,t){return t.red===255?t.blue!==0?n*(1-.17*(t.blue/255)):t.green!==0?n*.17*(t.green/255):0:t.blue===255?t.red!==0?n*(.67+.17*(t.red/255)):t.green!==0?n*(.67-.17*(t.green/255)):n*.67:t.green===255?t.red!==0?n*(.33-.16*(t.red/255)):t.blue!==0?n*(.33+.17*(t.blue/255)):n*.33:0}function G(n){const[t,d]=m.useState({position:0,color:n.color,onChange:n.onChange}),e=m.useRef();return m.useEffect(()=>{e.current&&d(o=>({position:U(165,n.color),color:n.color,onChange:o.onChange}))},[e,n.color]),m.useEffect(()=>{function o(c){e.current&&e.current.getAttribute("data-color-active")==="true"&&e.current.setAttribute("data-color-active","false")}function r(c){if(e.current&&e.current.getAttribute("class")===c.target.getAttribute("class")){e.current.setAttribute("data-color-active","true");const u=e.current.getBoundingClientRect();let l=Math.round(c.clientX-u.left);l<0?l=0:l>u.width&&(l=u.width);const i=H(t.color,l/u.width*100);t.onChange(i),c.stopPropagation(),c.preventDefault()}}function a(c){if(e.current&&e.current.getAttribute("data-color-active")==="true"){const u=e.current.getBoundingClientRect();let l=Math.round(c.clientX-u.left);l<0?l=0:l>=u.width&&(l=u.width-1);const i=H(t.color,l/u.width*100);t.onChange(i),c.stopPropagation(),c.preventDefault()}}return document.addEventListener("mousedown",r),document.addEventListener("mouseup",o),document.addEventListener("mousemove",a),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",a)}},[e,t]),g("div",{ref:e,className:V.Root,children:g("div",{className:V.Indicator,style:{transform:`translate(calc(${t.position}px - 6px), -1px)`}})})}try{G.displayName="ColorChooserHue",G.__docgenInfo={description:"",displayName:"ColorChooserHue",props:{color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"RGBAColor"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(color: RGBAColor) => void"}}}}}catch{}const k="_Root_1431d_1",z="_Highlight1_1431d_10",W="_Highlight2_1431d_17",J="_Indicator_1431d_24",b={Root:k,Highlight1:z,Highlight2:W,Indicator:J};function M(n,t,d){n=1-n;let{red:e,green:o,blue:r}=d;return e=e+(255-e)*n,o=o+(255-o)*n,r=r+(255-r)*n,e=e+(0-e)*t,o=o+(0-o)*t,r=r+(0-r)*t,{red:e,green:o,blue:r,alpha:1}}function Q(n,t,d,e){let o=[d.red-e.red,255-e.red,-e.red,-(255-e.red)],r=[d.green-e.green,255-e.green,-e.green,-(255-e.green)],a=[d.blue-e.blue,255-e.blue,-e.blue,-(255-e.blue)],c=[],u=[];if(Math.round(o[3])===0){c=[...o];let s=[r[0]*a[3],r[1]*a[3],r[2]*a[3],r[3]*a[3]],h=[a[0]*r[3],a[1]*r[3],a[2]*r[3],a[3]*r[3]];u=[s[0]-h[0],s[1]-h[1],s[2]-h[2],s[3]-h[3]]}else if(Math.round(r[3])===0){c=[...r];let s=[o[0]*a[3],o[1]*a[3],o[2]*a[3],o[3]*a[3]],h=[a[0]*o[3],a[1]*o[3],a[2]*o[3],a[3]*o[3]];u=[s[0]-h[0],s[1]-h[1],s[2]-h[2],s[3]-h[3]]}else if(Math.round(a[3])===0){c=[...a];let s=[o[0]*r[3],o[1]*r[3],o[2]*r[3],o[3]*r[3]],h=[r[0]*o[3],r[1]*o[3],r[2]*o[3],r[3]*o[3]];u=[s[0]-h[0],s[1]-h[1],s[2]-h[2],s[3]-h[3]]}let l=0,i=0;if(c[1]===u[1]){let s=[c[0]-u[0],c[1]-u[1],c[1]-u[2]];s[2]!==0?l=s[0]/s[2]:l=c[0]/c[2],l<0&&(l=0),o[2]*=l,o[3]*=l,r[2]*=l,r[3]*=l,a[2]*=l,a[3]*=l;let h=0,p=0,_=0;o[1]+o[3]!==0&&(h=(o[0]-o[2])/(o[1]+o[3])),r[1]+r[3]!==0&&(p=(r[0]-r[2])/(r[1]+r[3])),a[1]+a[3]!==0&&(_=(a[0]-a[2])/(a[1]+a[3])),i=1-Math.max(h,_,p)}else if(c[1]===u[2]){let s=[c[0]-u[0],c[1]-u[1],c[1]-u[2]];s[1]!==0?i=s[0]/s[1]:l=c[0]/c[2],o[1]*=i,o[3]*=i,r[1]*=i,r[3]*=i,a[1]*=i,a[3]*=i;let h=0,p=0,_=0;o[2]+o[3]!==0&&(h=(o[0]-o[1])/(o[2]+o[3])),r[2]+r[3]!==0&&(p=(r[0]-r[1])/(r[2]+r[3])),a[2]+a[3]!==0&&(_=(a[0]-a[1])/(a[2]+a[3])),i=1-Math.max(h,_,p)}else{let s=[c[0]*u[2],c[1]*u[2],c[2]*u[2]],h=[u[0]*c[2],u[1]*c[2],u[2]*c[2]],p=[s[0]-h[0],s[1]-h[1],s[2]-h[2]];p[1]!==0?i=p[0]/p[1]:l=c[0]/c[2],o[1]*=i,o[3]*=i,r[1]*=i,r[3]*=i,a[1]*=i,a[3]*=i;let _=0,q=0,P=0;o[2]+o[3]!==0&&(_=(o[0]-o[1])/(o[2]+o[3])),r[2]+r[3]!==0&&(q=(r[0]-r[1])/(r[2]+r[3])),a[2]+a[3]!==0&&(P=(a[0]-a[1])/(a[2]+a[3])),i=1-Math.max(_,P,q)}let f=i*n,C=l*t;return C<0?C=0:C>t&&(C=t),f<0?f=0:f>n&&(f=n),{x:f,y:C}}function N(n){const[t,d]=m.useState({positionX:-1,positionY:-1,color:n.color,realColor:n.realColor,onChange:n.onChange}),e=m.useRef();return m.useEffect(()=>{e.current&&d(o=>{let r={width:225,height:150};if(o.positionX===-1||o.positionX===-1){let a=Q(r.width,r.height,o.realColor,o.color);return{positionX:a.x,positionY:a.y,realColor:o.realColor,color:n.color,onChange:o.onChange}}else{let a=M(o.positionX/r.width,o.positionY/r.height,o.color);return o.onChange(a),{positionX:o.positionX,positionY:o.positionY,realColor:o.realColor,color:n.color,onChange:o.onChange}}})},[e,n.color]),m.useEffect(()=>{function o(c){e.current&&e.current.getAttribute("data-color-active")==="true"&&e.current.setAttribute("data-color-active","false")}function r(c){if(e.current&&e.current.getAttribute("class")===c.target.getAttribute("class")){e.current.setAttribute("data-color-active","true");let u=e.current.getBoundingClientRect(),l=Math.round(c.clientX-u.left),i=Math.round(c.clientY-u.top);l<0?l=0:l>u.width&&(l=u.width),i<0?i=0:i>u.height&&(i=u.height),d(f=>{let C=M(l/u.width,i/u.height,f.color);return f.onChange(C),{positionX:l,positionY:i,color:f.color,realColor:C,onChange:f.onChange}}),c.stopPropagation(),c.preventDefault()}}function a(c){if(e.current&&e.current.getAttribute("data-color-active")==="true"){let u=e.current.getBoundingClientRect(),l=Math.round(c.clientX-u.left),i=Math.round(c.clientY-u.top);l<0?l=0:l>u.width&&(l=u.width),i<0?i=0:i>u.height&&(i=u.height),d(f=>{let C=M(l/u.width,i/u.height,f.color);return f.onChange(C),{positionX:l,positionY:i,color:f.color,realColor:C,onChange:f.onChange}}),c.stopPropagation(),c.preventDefault()}}return document.addEventListener("mousedown",r),document.addEventListener("mouseup",o),document.addEventListener("mousemove",a),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",a)}},[e,t]),v("div",{ref:e,className:b.Root,style:{background:`rgb(${t.color.red},${t.color.green},${t.color.blue})`},children:[g("div",{className:b.Highlight1}),g("div",{className:b.Highlight2}),g("div",{className:b.Indicator,style:{transform:`translate(calc(${t.positionX}px - 6px), calc(${t.positionY}px - 6px))`}})]})}try{N.displayName="ColorGradiant",N.__docgenInfo={description:"",displayName:"ColorGradiant",props:{realColor:{defaultValue:null,description:"",name:"realColor",required:!0,type:{name:"RGBAColor"}},color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"RGBAColor"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newColor: RGBAColor) => void"}}}}}catch{}const Z="_Root_q38gq_1",ee="_Pattern_q38gq_10",te="_CurrentColor_q38gq_17",oe="_Indicator_q38gq_23",A={Root:Z,Pattern:ee,CurrentColor:te,Indicator:oe};function I(n){const[t,d]=m.useState({alpha:n.color.alpha,onChange:n.onChange}),e=m.useRef();m.useEffect(()=>{d(r=>({...r,alpha:n.color.alpha}))},[e,n.color]),m.useEffect(()=>{function r(u){e.current&&e.current.getAttribute("data-color-active")==="true"&&e.current.setAttribute("data-color-active","false")}function a(u){if(e.current&&e.current.getAttribute("class")===u.target.getAttribute("class")){e.current.setAttribute("data-color-active","true");let l=e.current.getBoundingClientRect(),i=Math.round(u.clientX-l.left);i<0?i=0:i>l.width&&(i=l.width);let f=i/l.width;t.onChange(f),u.stopPropagation(),u.preventDefault()}}function c(u){if(e.current&&e.current.getAttribute("data-color-active")==="true"){let l=e.current.getBoundingClientRect(),i=Math.round(u.clientX-l.left);i<0?i=0:i>l.width&&(i=l.width);let f=i/l.width;t.onChange(f),u.stopPropagation(),u.preventDefault()}}return document.addEventListener("mousedown",a),document.addEventListener("mouseup",r),document.addEventListener("mousemove",c),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("mouseup",r),document.removeEventListener("mousemove",c)}},[e,t]);const{color:o}=n;return v("div",{ref:e,className:A.Root,children:[g("div",{className:A.Pattern}),g("div",{className:A.CurrentColor,style:{background:`linear-gradient(to right, rgba(${o.red}, ${o.green}, ${o.blue}, 0) 0%, rgb(${o.red}, ${o.green}, ${o.blue}) 100%)`}}),e.current&&g("div",{className:A.Indicator,style:{transform:`translate(calc(${t.alpha*165}px - 6px), 0px)`}})]})}try{I.displayName="ColorOpaque",I.__docgenInfo={description:"",displayName:"ColorOpaque",props:{color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"RGBAColor"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newAlpha: number) => void"}}}}}catch{}const ne="_Root_6d9zw_1",re="_Pattern_6d9zw_12",ae="_Display_6d9zw_18",x={Root:ne,Pattern:re,Display:ae};function $(n){const{color:t}=n;return v("div",{className:x.Root,children:[g("div",{className:x.Pattern}),g("div",{className:x.Display,style:{background:`rgba(${t.red}, ${t.green}, ${t.blue}, ${n.alpha})`}})]})}try{$.displayName="ColorDisplay",$.__docgenInfo={description:"",displayName:"ColorDisplay",props:{color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"RGBAColor"}},alpha:{defaultValue:null,description:"",name:"alpha",required:!0,type:{name:"number"}}}}}catch{}const le="_Root_lfqa3_1",ie={Root:le};function E(n){const[t,d]=m.useState({...n.color}),e=m.useRef(null),o=m.useRef(null),r=m.useRef(null),a=m.useRef(null),c=m.useRef(null);m.useEffect(()=>{d(n.color),c.current&&(c.current.value=y(n.color))},[n.color]);const u=f=>{const C=T(f);C&&(n.onChange(C),d(C))},l=(f,C)=>{if(C.code==="ArrowUp"){let s=parseInt(C.currentTarget.value)+1;f==="A"?s>100&&(s=100):s>255&&(s=255),i(f,s.toFixed(0))}else if(C.code==="ArrowDown"){let s=parseInt(C.currentTarget.value)-1;s<0&&(s=0),i(f,s.toFixed(0))}},i=(f,C)=>{let s=C===""?0:parseInt(C);if(!isNaN(s)){if(f==="R"){s<0?s=0:s>255&&(s=255);const h={...t,red:s};n.onChange(h),d(h)}else if(f==="G"){s<0?s=0:s>255&&(s=255);const h={...t,green:s};n.onChange(h),d(h)}else if(f==="B"){s<0?s=0:s>255&&(s=255);const h={...t,blue:s};n.onChange(h),d(h)}else if(f==="A"){s<0?s=0:s>100&&(s=100);const h={...t,alpha:s/100};n.onChange(h),d(h)}}};return v("div",{className:ie.Root,children:[g("input",{ref:e,...n.inputProps,value:t.red.toFixed(0),onKeyDown:f=>l("R",f),onChange:f=>{i("R",f.target.value)}}),g("input",{ref:o,...n.inputProps,value:t.green.toFixed(0),onKeyDown:f=>l("G",f),onChange:f=>{i("G",f.target.value)}}),g("input",{ref:r,...n.inputProps,value:t.blue.toFixed(0),onKeyDown:f=>l("B",f),onChange:f=>{i("B",f.target.value)}}),g("input",{ref:a,...n.inputProps,value:(t.alpha*100).toFixed(0),onKeyDown:f=>l("A",f),onChange:f=>{i("A",f.target.value)}}),g("input",{ref:c,...n.inputProps,defaultValue:y(t),onChange:f=>{u(f.target.value)}}),g(R,{component:"span",children:" R "}),g(R,{component:"span",children:" G "}),g(R,{component:"span",children:" B "}),g(R,{component:"span",children:" A% "}),g(R,{component:"span",children:"Hex"})]})}try{E.displayName="ColorRGBAInput",E.__docgenInfo={description:"",displayName:"ColorRGBAInput",props:{color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"RGBAColor"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(color: RGBAColor) => void"}},inputProps:{defaultValue:null,description:"",name:"inputProps",required:!1,type:{name:"InputHTMLAttributes<HTMLInputElement>"}}}}}catch{}function B(n){if(typeof n=="string"){if(!n.startsWith("#")){const d=Y(n);d!==void 0&&(n=d)}const t=T(n);return t||{red:0,green:0,blue:0,alpha:1}}else return n}function L(n){let{red:t,green:d,blue:e}=n;if(t===d&&t===e)t=255,d=0,e=0;else{const r=Math.min(t,Math.min(d,e));t-=r,d-=r,e-=r;let a=1;t>d&&t>e?a=255/t:d>t&&d>e?a=255/d:a=255/e,t*=a,d*=a,e*=a,t=Math.round(t),d=Math.round(d),e=Math.round(e)}return{red:Math.max(0,Math.min(255,t)),green:Math.max(0,Math.min(255,d)),blue:Math.max(0,Math.min(255,e)),alpha:1}}function X(n){const[t,d]=m.useState(B(n.color)),[e,o]=m.useState(L(B(n.color))),[r,a]=m.useState(t.alpha),[c,u]=m.useState(D());return m.useEffect(()=>{d(B(n.color))},[n.color]),v("div",{className:w.Root,children:[g(N,{realColor:t,color:e,onChange:l=>{d(l);const i={...l,alpha:r};n.onChange&&n.onChange(i,"#"+y(i))}},"gradiant_"+c),v("div",{className:w.Options,children:[g($,{color:t,alpha:r}),g(G,{color:e,onChange:l=>{o(l)}}),g(I,{color:{...t,alpha:r},onChange:l=>{a(l);const i={...t,alpha:l};n.onChange&&n.onChange(i,"#"+y(i))}})]},"detail_"+c),g("div",{className:w.Input,children:g(E,{color:{...t,alpha:r},onChange:l=>{d(l),a(l.alpha),o(L(l)),u(D());const i={...l,alpha:l.alpha};n.onChange&&n.onChange(i,"#"+y(i))}})})]})}try{X.displayName="ColorChooser",X.__docgenInfo={description:"",displayName:"ColorChooser",props:{color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"string | RGBAColor"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((color: RGBAColor, colorHex: string) => void)"}}}}}catch{}export{X as C};
